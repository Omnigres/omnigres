$schema: "https://raw.githubusercontent.com/omnigres/omnigres/master/pg_yregress/schema.json"
instance:
  init:
    - create extension omni_schema cascade
    - create schema test;
tests:

- name: created function shows up with expected values
  steps:
    - create function test.test_function(input text) returns text as $$select input || ' ' || version() $$ language sql
    - query: select id,
                    schema_id,
                    schema_name,
                    name,
                    parameters,
                    definition,
                    return_type,
                    return_type_id,
                    language,
                    returns_set,
                    volatility_type
            from omni_schema.function_info_schema where id = omni_schema.function_id('test', 'test_function', '{text}');
      results:
      - id: "(test,test_function,{text})"
        schema_id: (test)
        schema_name: test
        name: test_function
        parameters: "{\"input text\"}"
        definition: select input || ' ' || version()
        return_type: pg_catalog.text
        return_type_id: "(pg_catalog,text)"
        language: sql
        returns_set: false
        volatility_type: FUNCTION    
